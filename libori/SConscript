import os

Import('env')

src = [
    "chunker.cc",
    "commit.cc",
    "debug.cc",
    "fuse_cmd.cc",
    "httpclient.cc",
    "httprepo.cc",
    "index.cc",
    "largeblob.cc",
    "localobject.cc",
    "localrepo.cc",
    "lrucache.cc",
    "monitor.cc",
    "object.cc",
    "peer.cc",
    "repo.cc",
    "remoterepo.cc",
    "scan.cc",
    "snapshotindex.cc",
    "sshclient.cc",
    "sshrepo.cc",
    "stream.cc",
    "tempdir.cc",
    "tree.cc",
    "treediff.cc",
    "util.cc",
    "fuse_cmd.cc",
    "metadatalog.cc",
    "objecthash.cc",
    "packfile.cc",
]

if os.name == 'posix':
    src += ['mutex_posix.cc', 'rwlock_posix.cc', 'thread_posix.cc']

if env["WITH_MDNS"] == "1":
    src.append("zeroconf.cc")

env.StaticLibrary("ori", src, CPPPATH = [ "#libori", "$CPPPATH" ])

